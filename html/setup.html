<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup - Introduction to Applied Bioinformatics 2026</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="../index.html" class="logo">The Bioinformatics Platform - KAUST</a>
            <button class="nav-toggle" onclick="toggleNav()">&#9776;</button>
            <ul id="nav-menu">
                <li><a href="../index.html">Home</a></li>
                <li><a href="schedule.html">Schedule</a></li>
                <li><a href="labs.html">Labs</a></li>
                <li><a href="setup.html" class="active">Setup</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <h1>Environment Setup</h1>
        <p>Complete these setup steps to run bioinformatics analysis. All labs will run on the KAUST Ibex HPC cluster.</p>

        <div class="info-box warning">
            <strong>Prerequisites</strong>
            <ul>
                <li>An active Ibex account (request via KAUST IT if you don't have one), <a href="https://my.ibex.kaust.edu.sa/teams">follow this link</a> (only accessible when using the KAUST network).</li>
                <li>A laptop with a terminal application and SSH access</li>
                <li>Practice the Linux commands listed in the end of this page</li>
            </ul>
        </div>

        <section id="terminal-setup">
            <h2>Step 1: Terminal Setup (Local Machine)</h2>
            <details><summary>macOS Users</summary>
                <div class="step" data-step="1">
                    <h4>Open Terminal</h4>
                    <pre><code># Applications > Utilities > Terminal
# Or use Spotlight: Cmd + Space, type "Terminal"

</code></pre>
                </div>
            </details>

            <details><summary>Windows Users (WSL)</summary>
                <div class="step" data-step="1">
                    <h4>Enable WSL</h4>
                    <pre><code># Open PowerShell as Administrator and run:
wsl --install

# This installs WSL with Ubuntu by default
# Restart your computer when prompted</code></pre>
                </div>
                <div class="step" data-step="2">
                    <h4>Complete Ubuntu Setup</h4>
                    <pre><code># After restart, Ubuntu will launch automatically
# Create a username and password when prompted

# Update package lists
sudo apt update && sudo apt upgrade -y</code></pre>
                </div>
            </details>

            <details><summary>Linux Users</summary>
                <p>You likely already have a terminal. Verify SSH is available:</p>
                <pre><code>ssh -V</code></pre>
            </details>
        </section>

        <section id="ibex-connection">
            <h2>Step 2: Connect to Ibex</h2>

            <div class="step" data-step="1">
                <h3>SSH Connection</h3>
                <pre><code># Connect to Ibex login node
ssh username@ilogin.ibex.kaust.edu.sa

# You will be prompted for your password
# After login, you should see the Ibex welcome message</code></pre>
            </div>

            <div class="step" data-step="2">
                <h3>Start an Interactive Session</h3>
                <pre><code># IMPORTANT: Never run analyses on login nodes!
# Request an interactive session for the workshop:
srun --pty --time=4:00:00 --mem=8G --cpus-per-task=4 bash

# You should see your prompt change to a compute node</code></pre>
            </div>

            <div class="info-box note">
                <strong>Ibex File Systems</strong>
                <table class="schedule-table">
                    <tr><th>Location</th><th>Path</th><th>Purpose</th><th>Quota</th></tr>
                    <tr><td>Home</td><td><code>/home/$USER</code></td><td>Scripts, configs (do NOT run jobs here)</td><td>200 GB</td></tr>
                    <tr><td>Scratch</td><td><code>/ibex/scratch/$USER</code></td><td>Analysis work directory (not backed up)</td><td>1.5 TB</td></tr>
                    <tr><td>Project</td><td><code>/ibex/project/...</code></td><td>Shared data</td><td>Varies</td></tr>
                </table>
            </div>

            <div class="step" data-step="3">
                <h3>Access Ibex Files via Mac Finder (Optional)</h3>
                <pre><code># On macOS, you can mount Ibex home in Finder:
# Finder > Go > Connect to Server (Cmd+K)
# Enter: smb://ilogin.ibex.kaust.edu.sa/home
# Use your Ibex credentials</code></pre>
            </div>
        </section>

        <section id="module-setup">
            <h2>Step 3: Load Required Tools on Ibex</h2>
            <p>Ibex uses the <strong>module system</strong> to manage software. Below are the modules needed for this workshop.</p>

            <div class="step" data-step="1">
                <h3>Verify Module System</h3>
                <pre><code># List available modules
module avail

# Search for specific tools
module avail fastqc
module avail samtools
module avail star</code></pre>
            </div>

            <div class="step" data-step="2">
                <h3>Load Workshop Tools</h3>
                <pre><code># Load bioinformatics tools (run these at the start of each session)
module load fastqc
module load fastp
module load seqkit
module load star
module load samtools
module load bedtools
module load blast+
module load multiqc
module load sra-tools
module laod ncbi_datasets_tools

# Verify tools are loaded
module list

# Test a few tools
fastqc --version
samtools --version
seqkit version</code></pre>
                </div>
        </section>

        <section id="workspace-setup">
            <h2>Step 4: Create Workshop Workspace</h2>
            <pre><code># Navigate to your scratch space
cd /ibex/scratch/$USER

# Create workshop directory structure
mkdir -p workshop
cd workshop
mkdir -p raw_data references trimmed_data qc alignment results blast_results logs 

# Verify structure
tree</code></pre>
        </section>

        <section id="troubleshooting">
            <h2>Troubleshooting</h2>

            <div class="info-box warning">
                <strong>Cannot connect to Ibex</strong>
                <p>Make sure you are on the KAUST network or connected via VPN. Try: <code>ssh -v username@ilogin.ibex.kaust.edu.sa</code> for verbose output.</p>
            </div>

            <div class="info-box warning">
                <strong>Module not found</strong>
                <p>Module names may include version numbers. Use <code>module avail toolname</code> to see available versions, then load the specific version: <code>module load samtools/1.17</code></p>
            </div>

            <div class="info-box warning">
                <strong>Permission denied on scratch</strong>
                <p>Your scratch directory may not exist yet. Contact KAUST IT to provision it, or check if the path is <code>/ibex/scratch/$USER</code> instead.</p>
            </div>
        </section>

        <section>
            <h2>Quick Reference: Daily Commands</h2>
            <pre><code># Connect to Ibex
ssh username@ilogin.ibex.kaust.edu.sa

# Start interactive session
srun --pty --time=4:00:00 --mem=8G --cpus-per-task=4 bash

# Navigate to workspace
cd /ibex/user/$USER/workshop</code></pre>
        </section>

        <section>
            <details>
                <summary><h2 style="display: inline; cursor: pointer;">Linux Command Line Cheatsheet</h2></summary>

                <h3>Navigation</h3>
                <pre><code># Print current directory
pwd

# List files and directories
ls              # Basic listing
ls -l           # Detailed listing (permissions, size, date)
ls -la          # Include hidden files (starting with .)
ls -lh          # Human-readable file sizes

# Change directory
cd /path/to/dir     # Go to specific directory
cd ~                # Go to home directory
cd ..               # Go up one level
cd -                # Go to previous directory</code></pre>

                <h3>File Operations</h3>
                <pre><code># Create files and directories
mkdir mydir             # Create directory
mkdir -p dir1/dir2      # Create nested directories
touch file.txt          # Create empty file

# Copy files
cp file.txt backup.txt          # Copy file
cp -r mydir/ mydir_backup/      # Copy directory recursively

# Move/rename files
mv oldname.txt newname.txt      # Rename file
mv file.txt /path/to/dest/      # Move file

# Remove files
rm file.txt             # Delete file
rm -r mydir/            # Delete directory recursively
rm -i file.txt          # Ask before deleting</code></pre>

                <h3>Viewing Files</h3>
                <pre><code># Display file contents
cat file.txt            # Show entire file
head file.txt           # Show first 10 lines
head -n 20 file.txt     # Show first 20 lines
tail file.txt           # Show last 10 lines
tail -f logfile.txt     # Follow file updates in real-time
less file.txt           # View with scrolling (q to quit)

# View compressed files
gzip -dc file.gz         # View gzipped file (works on macOS and Linux)
zless file.gz           # View gzipped file with scrolling</code></pre>

                <h3>File Information</h3>
                <pre><code># Count lines, words, characters
wc file.txt             # Lines, words, characters
wc -l file.txt          # Lines only

# File size
du -h file.txt          # Size of file
du -sh mydir/           # Total size of directory

# Disk space
df -h                   # Disk usage summary</code></pre>

                <h3>Searching</h3>
                <pre><code># Find files
find . -name "*.fastq"          # Find by name pattern
find . -type f -size +100M      # Find files larger than 100MB

# Search file contents
grep "pattern" file.txt         # Lines containing pattern
grep -r "pattern" mydir/        # Search recursively in directory
grep -i "pattern" file.txt      # Case-insensitive search
grep -c "pattern" file.txt      # Count matching lines</code></pre>

                <h3>Pipes and Redirection</h3>
                <pre><code># Redirect output
command > file.txt      # Write output to file (overwrite)
command >> file.txt     # Append output to file
command 2> error.txt    # Redirect errors to file

# Pipes (send output to another command)
cat file.txt | head             # First 10 lines
cat file.txt | grep "pattern"   # Filter lines
cat file.txt | wc -l            # Count lines
cat file.txt | sort | uniq      # Sort and remove duplicates</code></pre>

                <h3>Compression</h3>
                <pre><code># Gzip
gzip file.txt           # Compress (creates file.txt.gz)
gunzip file.txt.gz      # Decompress

# Tar archives
tar -cvf archive.tar dir/       # Create archive
tar -xvf archive.tar            # Extract archive
tar -czvf archive.tar.gz dir/   # Create compressed archive
tar -xzvf archive.tar.gz        # Extract compressed archive</code></pre>

                <h3>Permissions</h3>
                <pre><code># View permissions
ls -l file.txt          # Shows -rw-r--r-- format

# Change permissions
chmod +x script.sh      # Make executable
chmod 755 script.sh     # rwx for owner, rx for others

# Change ownership
chown user:group file.txt</code></pre>

                <h3>Process Management</h3>
                <pre><code># View running processes
ps                      # Your processes
ps aux                  # All processes
top                     # Interactive process viewer (q to quit)
htop                    # Better interactive viewer (if installed)

# Control processes
command &               # Run in background
Ctrl+C                  # Stop current process
Ctrl+Z                  # Suspend current process
bg                      # Resume suspended process in background
kill PID                # Terminate process by ID
killall processname     # Terminate by name</code></pre>

                <h3>Useful Shortcuts</h3>
                <pre><code># Keyboard shortcuts
Ctrl+C          # Cancel current command
Ctrl+L          # Clear screen
Ctrl+A          # Move cursor to start of line
Ctrl+E          # Move cursor to end of line
Ctrl+R          # Search command history
Tab             # Auto-complete file/directory names
Up/Down         # Navigate command history

# History
history                 # Show command history
!123                    # Run command #123 from history
!!                      # Repeat last command</code></pre>

            </details>
        </section>
    </main>

    <footer>
        <p>Introduction to Applied Bioinformatics 2026 - KAUST</p>
    </footer>

    <script>
        function toggleNav() {
            document.getElementById('nav-menu').classList.toggle('show');
        }
    </script>
</body>
</html>
